{% extends 'base.html' %}

{% block title %}
  Home
{% endblock %}

{% block content %}
  {% if user.is_authenticated %}
    <p>Hi {{ user.username }}!<p>

    <h2>Assignments:</h2>
    
    <ul class="list-group">
      {% for assignemnt in assignments %}
        <li class="list-group-item d-flex justify-content-between align-items-center {% if assignemnt.active %} list-group-item-info {% endif %}">
          <div class="ms-2 me-auto">
            {% if assignemnt.active  %}
              <a href="{% url 'assignment' assignemnt.pk %}" class="fw-bold"> 
                {{ assignemnt.name }}
              </a>
              <small class="text-muted">due {{ assignemnt.remained.days }} days</small>
            {% else %}
              <div class="fw-bold">{{ assignemnt.name }}</div>
            {% endif %}
          </div>

          <span class="badge bg-primary rounded-pill">{{ assignemnt.questions.all|length }}</span>
        </li>
      {% endfor %}
    </ul>

    <div style="min-height: 1rem;"> </div>
    <form action="{% url 'logout' %}" method="post">
      {% csrf_token %}
      <button class="btn btn-outline-secondary" type="submit">Logout</button>
    </form>


  {% else %}
    <p>You are not logged in</p>
    <p>
      <a href="{% url 'login' %}">Login</a>
    </p>
  {% endif %}
{% endblock %}
